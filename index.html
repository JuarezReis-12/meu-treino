
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treino</title>
</head>
<body>
    <div class="container">
        <h2>Registre seu Treino</h2>
        
        <input type="text" id="exercise" placeholder="Exerc√≠cio">
        <input type="number" id="series" placeholder="S√©ries">
        <input type="number" id="reps" placeholder="Repeti√ß√µes">
        <input type="number" id="weight" placeholder="Carga (kg)">
        <button id="addButton">Adicionar</button>

        <h2>Treinos Salvos</h2>
        <ul id="exerciseList"></ul>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBw9yVvY1T-HFs6CF5ttKgDGafpKW1xr8o",
            authDomain: "meu-treino-cd8f9.firebaseapp.com",
            projectId: "meu-treino-cd8f9",
            storageBucket: "meu-treino-cd8f9.firebasestorage.app",
            messagingSenderId: "993126178625",
            appId: "1:993126178625:web:6425d4a03cf0b41e544bc0"
        };

        // Inicializa o Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Fun√ß√£o para adicionar o treino no Firestore
        async function addExercise() {
            let exercise = document.getElementById("exercise").value;
            let series = document.getElementById("series").value;
            let reps = document.getElementById("reps").value;
            let weight = document.getElementById("weight").value;

            // Verifica se todos os campos est√£o preenchidos
            if (exercise && series && reps && weight) {
                try {
                    // Adiciona o treino no Firestore
                    await addDoc(collection(db, "exercises"), {
                        exercise,
                        series,
                        reps,
                        weight
                    });

                    // Limpa os campos ap√≥s o cadastro
                    document.getElementById("exercise").value = "";
                    document.getElementById("series").value = "";
                    document.getElementById("reps").value = "";
                    document.getElementById("weight").value = "";

                    // Atualiza a lista de exerc√≠cios
                    loadExercises();
                } catch (error) {
                    console.error("Erro ao adicionar exerc√≠cio: ", error);
                    alert("Erro ao adicionar exerc√≠cio.");
                }
            } else {
                alert("Preencha todos os campos!");
            }
        }

        // Fun√ß√£o para carregar os treinos do Firestore
        async function loadExercises() {
            try {
                const querySnapshot = await getDocs(collection(db, "exercises"));
                let list = document.getElementById("exerciseList");
                list.innerHTML = "";

                querySnapshot.forEach((doc) => {
                    let data = doc.data();
                    let li = document.createElement("li");
                    li.innerHTML = `${data.exercise} - ${data.series} s√©ries - ${data.reps} reps - ${data.weight} kg 
                        <button class="delete" onclick="deleteExercise('${doc.id}')">üóëÔ∏è</button>`;
                    list.appendChild(li);
                });
            } catch (error) {
                console.error("Erro ao carregar exerc√≠cios: ", error);
            }
        }

        // Fun√ß√£o para deletar um exerc√≠cio
        async function deleteExercise(id) {
            try {
                await deleteDoc(doc(db, "exercises", id));
                loadExercises();
            } catch (error) {
                console.error("Erro ao deletar exerc√≠cio: ", error);
            }
        }

        // Espera o documento carregar e adiciona o evento ao bot√£o
        document.addEventListener("DOMContentLoaded", function() {
            document.getElementById("addButton").addEventListener("click", addExercise);
            loadExercises();
        });
    </script>
</body>

</html>