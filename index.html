
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treino</title>
</head>
<body>
    <div class="container">
        <h2>Registre seu Treino</h2>
        
        <form id="exerciseForm">
            <input type="text" id="exercise" placeholder="Exerc√≠cio">
            <input type="number" id="series" placeholder="S√©ries">
            <input type="number" id="reps" placeholder="Repeti√ß√µes">
            <input type="number" id="weight" placeholder="Carga (kg)">
            <button type="submit">Adicionar</button>
        </form>

        <h2>Treinos Salvos</h2>
        <ul id="exerciseList"></ul>

        <h2>Cron√¥metro de Descanso</h2>
        <label>Tempo (segundos):</label>
        <input type="number" id="restTime" value="60">
        <button id="startTimer">Iniciar Descanso</button>
        <p id="timerDisplay">00:00</p>
    </div>

    <script type="module">
        function startRestTimer() {
    let timeLeft = parseInt(document.getElementById("restTime").value);
    let timerDisplay = document.getElementById("timerDisplay");

    if (isNaN(timeLeft) || timeLeft <= 0) {
        alert("Digite um tempo v√°lido para o descanso.");
        return;
    }

    // Formata√ß√£o inicial
    timerDisplay.textContent = formatTime(timeLeft);

    let timerInterval = setInterval(() => {
        timeLeft--;

        if (timeLeft < 0) {
            clearInterval(timerInterval);
            timerDisplay.textContent = "Tempo Esgotado!";
            return;
        }

        timerDisplay.textContent = formatTime(timeLeft);
    }, 1000);
}

// Fun√ß√£o para formatar o tempo (minutos e segundos)
function formatTime(seconds) {
    let min = Math.floor(seconds / 60);
    let sec = seconds % 60;
    return `${String(min).padStart(2, "0")}:${String(sec).padStart(2, "0")}`;
}

// Adiciona o evento ao bot√£o de iniciar descanso
document.getElementById("startTimer").addEventListener("click", startRestTimer);
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
import {
  getFirestore,
  collection,
  addDoc,
  getDocs,
  updateDoc,
  deleteDoc,
  doc
} from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

// Configura√ß√£o do Firebase
const firebaseConfig = {
	apiKey: "AIzaSyBw9yVvY1T-HFs6CF5ttKgDGafpKW1xr8o",
        authDomain: "meu-treino-cd8f9.firebaseapp.com",
        projectId: "meu-treino-cd8f9",
        storageBucket: "meu-treino-cd8f9.firebasestorage.app",
        messagingSenderId: "993126178625",
        appId: "1:993126178625:web:6425d4a03cf0b41e544bc0"
};

// Inicializa Firebase e Firestore
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Fun√ß√£o para adicionar um novo exerc√≠cio
async function addExercise(event) {
  event.preventDefault(); // Evita o recarregamento da p√°gina
  
  let exercise = document.getElementById("exercise").value.trim();
  let series = document.getElementById("series").value.trim();
  let reps = document.getElementById("reps").value.trim();
  let weight = document.getElementById("weight").value.trim();

  if (!exercise || !series || !reps || !weight) {
    alert("Preencha todos os campos!");
    return;
  }

  try {
    await addDoc(collection(db, "exercises"), {
      exercise,
      series,
      reps,
      weight
    });

    alert("Exerc√≠cio adicionado com sucesso!");
    document.getElementById("exerciseForm").reset();
    loadExercises(); // Atualiza a lista ap√≥s adicionar
  } catch (error) {
    console.error("Erro ao adicionar exerc√≠cio: ", error);
  }
}

// Fun√ß√£o para carregar os exerc√≠cios na lista
async function loadExercises() {
  try {
    const querySnapshot = await getDocs(collection(db, "exercises"));
    let list = document.getElementById("exerciseList");
    list.innerHTML = "";

    querySnapshot.forEach((docSnap) => {
      let data = docSnap.data();
      let li = document.createElement("li");
      li.textContent = `${data.exercise} - ${data.series} s√©ries - ${data.reps} reps - ${data.weight} kg`;

      // Criando o bot√£o de edi√ß√£o
      let editButton = document.createElement("button");
      editButton.textContent = "‚úèÔ∏è";
      editButton.addEventListener("click", function () {
        editExercise(docSnap.id, data.exercise, data.series, data.reps, data.weight);
      });

      // Criando o bot√£o de exclus√£o
      let deleteButton = document.createElement("button");
      deleteButton.textContent = "üóëÔ∏è";
      deleteButton.addEventListener("click", function () {
        deleteExercise(docSnap.id);
      });

      li.appendChild(editButton);
      li.appendChild(deleteButton);
      list.appendChild(li);
    });
  } catch (error) {
    console.error("Erro ao carregar exerc√≠cios: ", error);
  }
}

// Fun√ß√£o para editar um exerc√≠cio
async function editExercise(id, oldExercise, oldSeries, oldReps, oldWeight) {
  let newExercise = prompt("Nome do exerc√≠cio:", oldExercise);
  let newSeries = prompt("N√∫mero de s√©ries:", oldSeries);
  let newReps = prompt("N√∫mero de repeti√ß√µes:", oldReps);
  let newWeight = prompt("Peso utilizado (kg):", oldWeight);

  if (newExercise && newSeries && newReps && newWeight) {
    try {
      await updateDoc(doc(db, "exercises", id), {
        exercise: newExercise,
        series: newSeries,
        reps: newReps,
        weight: newWeight
      });

      loadExercises();
    } catch (error) {
      console.error("Erro ao atualizar exerc√≠cio: ", error);
    }
  }
}

// Fun√ß√£o para excluir um exerc√≠cio
async function deleteExercise(id) {
  if (confirm("Tem certeza que deseja excluir este exerc√≠cio?")) {
    try {
      await deleteDoc(doc(db, "exercises", id));
      loadExercises();
    } catch (error) {
      console.error("Erro ao excluir exerc√≠cio: ", error);
    }
  }
}

// Event Listener para o formul√°rio
document.getElementById("exerciseForm").addEventListener("submit", addExercise);

// Carrega os exerc√≠cios ao iniciar
loadExercises();
    </script>
</body>

</html>