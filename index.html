
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treino</title>
</head>
<body>
    <div id="loginContainer">
        <h2>Login</h2>
        <input type="email" id="email" placeholder="E-mail">
        <input type="password" id="password" placeholder="Senha">
        <button id="loginButton">Login</button>
        <button id="registerButton">Registrar</button>
        <p id="loginMessage"></p>
    </div>

    <div id="appContainer" style="display:none;">
        <h2>Registre seu Treino</h2>
        <input type="text" id="exercise" placeholder="Exercício">
        <input type="number" id="series" placeholder="Séries">
        <input type="number" id="reps" placeholder="Repetições">
        <input type="number" id="weight" placeholder="Carga (kg)">
        <button id="addButton">Adicionar</button>
        <button id="logoutButton">Logout</button>
        
        <h2>Treinos Salvos</h2>
        <ul id="exerciseList"></ul>

        <h2>Cronômetro de Descanso</h2>
        <label>Tempo (segundos):</label>
        <input type="number" id="restTime" value="60">
        <button id="startTimer">Iniciar Descanso</button>
        <p id="timerDisplay">00:00</p>
    </div>

    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";
    import { getFirestore, collection, addDoc, getDocs, updateDoc, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBw9yVvY1T-HFs6CF5ttKgDGafpKW1xr8o",
        authDomain: "meu-treino-cd8f9.firebaseapp.com",
        projectId: "meu-treino-cd8f9",
        storageBucket: "meu-treino-cd8f9.firebasestorage.app",
        messagingSenderId: "993126178625",
        appId: "1:993126178625:web:6425d4a03cf0b41e544bc0"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const db = getFirestore(app);

    document.getElementById("loginButton").addEventListener("click", async () => {
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        try {
            await signInWithEmailAndPassword(auth, email, password);
            document.getElementById("loginMessage").textContent = "Login bem-sucedido!";
        } catch (error) {
            document.getElementById("loginMessage").textContent = "Erro: " + error.message;
        }
    });

    document.getElementById("registerButton").addEventListener("click", async () => {
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        try {
            await createUserWithEmailAndPassword(auth, email, password);
            document.getElementById("loginMessage").textContent = "Conta criada com sucesso!";
        } catch (error) {
            document.getElementById("loginMessage").textContent = "Erro: " + error.message;
        }
    });

    document.getElementById("logoutButton").addEventListener("click", async () => {
        await signOut(auth);
    });

    onAuthStateChanged(auth, (user) => {
        if (user) {
            document.getElementById("loginContainer").style.display = "none";
            document.getElementById("appContainer").style.display = "block";
            loadExercises();
        } else {
            document.getElementById("loginContainer").style.display = "block";
            document.getElementById("appContainer").style.display = "none";
        }
    });

    async function addExercise() {
        let exercise = document.getElementById("exercise").value.trim();
        let series = document.getElementById("series").value.trim();
        let reps = document.getElementById("reps").value.trim();
        let weight = document.getElementById("weight").value.trim();
        if (!exercise || !series || !reps || !weight) {
            alert("Preencha todos os campos!");
            return;
        }
        try {
            await addDoc(collection(db, "exercises"), { exercise, series, reps, weight });
            alert("Exercício adicionado com sucesso!");
            loadExercises();
        } catch (error) {
            console.error("Erro ao adicionar exercício: ", error);
        }
    }
    document.getElementById("addButton").addEventListener("click", addExercise);

    async function loadExercises() {
        try {
            const querySnapshot = await getDocs(collection(db, "exercises"));
            let list = document.getElementById("exerciseList");
            list.innerHTML = "";
            querySnapshot.forEach((docSnap) => {
                let data = docSnap.data();
                let li = document.createElement("li");
                li.textContent = `${data.exercise} - ${data.series} séries - ${data.reps} reps - ${data.weight} kg`;
                list.appendChild(li);
            });
        } catch (error) {
            console.error("Erro ao carregar exercícios: ", error);
        }
    }
    </script>
</body>

</html>